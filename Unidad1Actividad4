package com.example.myapplication;

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import java.util.Arrays;
import java.util.Random;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class MainActivity extends AppCompatActivity {

    private TextView tvResult;
    private Button btnStart;


    private final ExecutorService executor = Executors.newSingleThreadExecutor();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


        tvResult = findViewById(R.id.tvResult);
        btnStart = findViewById(R.id.btnStart);


        btnStart.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startSortProcess();
            }
        });
    }

    private void startSortProcess() {

        btnStart.setEnabled(false);
        tvResult.setText("Generando y ordenando 1 millÃ³n de elementos...");


        executor.execute(() -> {

            final int ARRAY_SIZE = 1_000_000;
            int[] numbers = new int[ARRAY_SIZE];
            Random random = new Random();


            for (int i = 0; i < ARRAY_SIZE; i++) {
                numbers[i] = random.nextInt();
            }


            long startTime = System.nanoTime();


            Arrays.sort(numbers);


            long endTime = System.nanoTime();


            double durationInMillis = (endTime - startTime) / 1_000_000.0;
            final String resultText = String.format("Tiempo de ordenamiento: %.2f ms", durationInMillis);


            runOnUiThread(() -> {
                tvResult.setText(resultText);

                btnStart.setEnabled(true);
            });
        });
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        executor.shutdown();
    }
}
